<!-- force redeploy -->


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Be My Valentine?</title>

  <style>
    body{
      font-family: Arial, sans-serif;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
      margin:0;
      background:#FAEEE6;
      overflow:hidden;
    }

    #content{
      background:#FFC0CB;
      border-radius:12px;
      box-shadow:0 8px 16px rgba(0,0,0,0.2);
      padding:26px;
      text-align:center;
      max-width:620px;
      z-index:2;
      position:relative;
    }

    #intro{
      font-size:16px;
      line-height:1.55;
      margin-bottom:18px;
    }

    #question{
      margin:10px 0 6px 0;
    }

    button{
      font-size:20px;
      border-radius:12px;
      padding:14px 22px;
      margin:10px;
      border:none;
      cursor:pointer;
      box-shadow:0 8px 16px rgba(0,0,0,0.2);
      transition:0.25s;
    }

    #yesButton{ background:#4CAF50; color:#fff; }
    #maybeButton{ background:#ff9800; color:#fff; }
    #noButton{ background:#f44336; color:#fff; }

    #noButton:disabled{
      background:#999;
      cursor:not-allowed;
      box-shadow:none;
    }

    #message{
      min-height:22px;
      font-weight:600;
      margin-top:10px;
    }

    .float{
      position:fixed;
      top:-120px;
      animation: fall linear infinite;
      pointer-events:none;
      z-index:1;
      user-select:none;
    }

    @keyframes fall{
      from { transform: translateY(-140px) rotate(0deg); }
      to   { transform: translateY(110vh) rotate(360deg); }
    }

    canvas{
      position:fixed;
      top:0;
      left:0;
      pointer-events:none;
      z-index:5;
    }

    #soundFixBtn{
      display:none;
      margin-top:12px;
      font-size:16px;
      padding:10px 14px;
    }
  </style>
</head>

<body>

  <!-- MP3 must exist as lover.mp3 in repo root -->
  <audio id="loveSong" preload="auto" loop playsinline>
    <source src="lover.mp3" type="audio/mpeg">
  </audio>

  <canvas id="confetti"></canvas>

  <div id="content">
    <p id="intro">
      <strong>Hey Lover,</strong><br><br>
      youâ€™re the girl who has my heart, my dreams, and makes me a better me.
      Since you always tell me to ask you early, here goes. ğŸ’•<br><br>
      If itâ€™s no, youâ€™ll have to click it <strong>5 times</strong> for it to be acceptedâ€¦
      or your device will break &lt;3<br><br>
      <strong>ILYTTBAMIT</strong>
    </p>

    <h2 id="question">Be My Valentine?</h2>

    <button id="yesButton">YES</button>
    <button id="maybeButton">MAYBE</button>
    <button id="noButton">NO</button>

    <p id="message"></p>

    <button id="soundFixBtn">Tap to play music ğŸ¶</button>
  </div>

  <script>
    const yesBtn = document.getElementById("yesButton");
    const noBtn = document.getElementById("noButton");
    const maybeBtn = document.getElementById("maybeButton");
    const question = document.getElementById("question");
    const message = document.getElementById("message");
    const song = document.getElementById("loveSong");
    const soundFix = document.getElementById("soundFixBtn");

    let noCount = 0;
    let maybeYes = false;
    let celebrated = false;

    // ---- NO RUNS AWAY ----
    function moveNo(){
      noBtn.style.position="fixed";
      noBtn.style.left=Math.random()*(window.innerWidth-120)+"px";
      noBtn.style.top=Math.random()*(window.innerHeight-60)+"px";
    }
    noBtn.addEventListener("mouseenter",()=>{ if(!noBtn.disabled) moveNo(); });

    noBtn.addEventListener("click",()=>{
      noCount++;
      if(!noBtn.disabled) moveNo();
      const msgs=["hmmâ€¦ you sure? ğŸ˜","okay now youâ€™re playing","last chance ğŸ‘€","donâ€™t do this ğŸ˜­"];
      if(noCount<=4) message.innerText=msgs[noCount-1];
      if(noCount===5){
        message.innerText="ğŸ’¥ NO BUTTON BROKE ğŸ’¥";
        noBtn.disabled=true;
        noBtn.innerText="BROKEN";
      }
    });

    // ---- MAYBE ----
    maybeBtn.addEventListener("click",()=>{
      if(!maybeYes){
        maybeYes=true;
        maybeBtn.innerText="u mean yes?";
      } else {
        yesCelebration();
      }
    });

    yesBtn.addEventListener("click", yesCelebration);

    function yesCelebration(){
      if(celebrated) return;
      celebrated=true;

      question.innerText="YAY! BE READY FOR THE GREATEST BEACH SIDE NIGHT OF YOUR LIFE!";
      yesBtn.style.display="none";
      noBtn.style.display="none";
      maybeBtn.style.display="none";
      message.innerText="";

      playSong();

      spawnFalling(90);
      startConfetti(80);
    }

    // ---- AUDIO (bulletproof) ----
    function playSong(){
      song.currentTime=0;
      song.volume=1;
      const p=song.play();
      if(p && p.catch){
        p.catch(()=> soundFix.style.display="inline-block");
      }
    }

    soundFix.addEventListener("click",()=>{
      soundFix.style.display="none";
      song.play().catch(()=>{});
    });

    // ---- FLOWERS ----
    function spawnFalling(total){
      const emojis=["ğŸŒ·","ğŸŒ¸","ğŸŒ¹","ğŸ’","ğŸª»","ğŸŒº","ğŸŒ¼","ğŸŒ»","â¤ï¸"];
      for(let i=0;i<total;i++){
        const el=document.createElement("div");
        el.className="float";
        el.innerText=emojis[Math.floor(Math.random()*emojis.length)];
        el.style.left=Math.random()*window.innerWidth+"px";
        el.style.animationDuration=(3+Math.random()*5)+"s";
        el.style.fontSize=(28+Math.random()*34)+"px";
        document.body.appendChild(el);
        setTimeout(()=>el.remove(),11000);
      }
    }

    // ---- CONFETTI ----
    const canvas=document.getElementById("confetti");
    const ctx=canvas.getContext("2d");
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;

    let confetti=[];
    function startConfetti(n){
      confetti=[];
      for(let i=0;i<n;i++){
        confetti.push({
          x:Math.random()*canvas.width,
          y:Math.random()*canvas.height*0.2,
          r:Math.random()*4+2,
          vx:(Math.random()-0.5)*3,
          vy:Math.random()*3+2,
          color:`hsl(${Math.random()*360},100%,55%)`
        });
      }
      requestAnimationFrame(drawConfetti);
    }

    function drawConfetti(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      confetti.forEach(c=>{
        ctx.beginPath();
        ctx.fillStyle=c.color;
        ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
        ctx.fill();
        c.x+=c.vx;
        c.y+=c.vy;
      });
      if(confetti.length>0) requestAnimationFrame(drawConfetti);
    }
  </script>

</body>
</html>
